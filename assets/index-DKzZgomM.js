import{r as t,_ as b,j as s}from"./index-D1HCuXfo.js";const S=(p="")=>`${Date.now().toString(36)}-${Math.random().toString(36).slice(2,8)}${p}`;function X(){const[p,j]=t.useState([{id:S(),role:"system",text:"Figlet TUI — type `help` for commands. Try: `figlet hello`"}]),[F,v]=t.useState(""),[L,C]=t.useState([]),[H,N]=t.useState(-1),[O,z]=t.useState([]),[g,w]=t.useState("Standard"),[u,k]=t.useState(!0),[T,x]=t.useState(!1),[_,I]=t.useState([]),[P,D]=t.useState(12),[R,M]=t.useState(!1),[W,A]=t.useState([]),[B,U]=t.useState(""),[V,Y]=t.useState(!0);t.useRef(null),t.useRef(!1);const m=t.useRef(null),y=t.useRef(null),[q,G]=t.useState(!1),[J,K]=t.useState(0);t.useEffect(()=>{var e;(e=y.current)==null||e.focus()},[]),t.useEffect(()=>{m.current&&(m.current.scrollTop=m.current.scrollHeight)},[p,R]),t.useEffect(()=>{b(()=>import("./figlet-Dsjz5JCJ.js"),[]).then(e=>{(e&&e.default||e).fonts((n,a)=>{!n&&a&&I(a)})})},[]);function r(e){j(i=>[...i,{id:S(),...e}])}const E=e=>{if(e.trim().toLowerCase()==="hn"||e.trim().toLowerCase()==="hackernews"){r({role:"system",text:"Fetching top Hacker News stories..."}),fetch("https://hacker-news.firebaseio.com/v0/topstories.json").then(o=>o.json()).then(async o=>{const f=o.slice(0,10);let c=(await Promise.all(f.map(l=>fetch(`https://hacker-news.firebaseio.com/v0/item/${l}.json`).then(h=>h.json())))).map((l,h)=>{const $=l.url||"https://news.ycombinator.com/item?id="+l.id;return`${h+1}. ${l.title} [${l.score}★]
    <a href='${$}' target='_blank' rel='noopener noreferrer'>${$}</a>`}).join(`

`);r({role:"assistant",text:`
Hacker News Top Stories:

`+c})}).catch(()=>r({role:"assistant",text:"Failed to fetch Hacker News."}));return}const i=e.trim();if(!i)return;r({role:"user",text:i});const[n,...a]=i.split(/\s+/);if(n==="clear"){j([{id:S(),role:"system",text:"Figlet TUI — type `help` for commands."}]);return}if(n==="help"){r({role:"system",text:"Commands: figlet [-s] <text>, font <name>, font-select, figlet-mode, size <n>, list-fonts [q], clear, help"});return}if(n==="figlet-mode"){k(o=>!o),r({role:"system",text:`Figlet mode is now ${u?"OFF":"ON"}`});return}if(n==="font-select"){x(!0);return}if(n==="font"&&a.length>0){w(a.join(" ")),r({role:"system",text:`Font set to: ${a.join(" ")}`});return}if(u&&n!=="figlet"&&n!=="font"&&n!=="font-select"&&n!=="clear"&&n!=="help"&&n!=="figlet-mode"){b(()=>import("./figlet-Dsjz5JCJ.js"),[]).then(o=>{(o&&o.default||o).text(i,{font:g},(d,c)=>{r(d||!c?{role:"assistant",text:"Error rendering figlet."}:{role:"assistant",text:`
`+c})})}).catch(()=>{r({role:"assistant",text:"Figlet library not found."})});return}if(n==="figlet"){b(()=>import("./figlet-Dsjz5JCJ.js"),[]).then(o=>{const f=o&&o.default||o,d=a.join(" ");f.text(d,{font:g},(c,l)=>{r(c||!l?{role:"assistant",text:"Error rendering figlet."}:{role:"assistant",text:`
`+l})})}).catch(()=>{r({role:"assistant",text:"Figlet library not found."})});return}r({role:"assistant",text:`You typed: ${i}`})};return s.jsxs("div",{className:"ai-tui",style:{minHeight:320,height:"80vh",maxHeight:"80vh",overflow:"hidden",display:"flex",flexDirection:"column",background:"#181828",color:"#fff"},children:[T&&s.jsx("div",{style:{position:"fixed",top:0,left:0,width:"100vw",height:"100vh",background:"rgba(0,0,0,0.6)",zIndex:1e3,display:"flex",alignItems:"center",justifyContent:"center"},children:s.jsxs("div",{style:{background:"#222",color:"#fff",borderRadius:10,padding:24,minWidth:320,maxHeight:"70vh",overflowY:"auto",boxShadow:"0 4px 32px #0008"},children:[s.jsxs("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"center",marginBottom:12},children:[s.jsx("strong",{children:"Select a Font"}),s.jsx("button",{onClick:()=>x(!1),style:{background:"none",border:"none",color:"#fff",fontSize:20,cursor:"pointer"},children:"×"})]}),s.jsxs("div",{style:{maxHeight:320,overflowY:"auto"},children:[_.length===0&&s.jsx("div",{children:"Loading fonts..."}),_.map(e=>s.jsx("div",{style:{padding:"6px 0",cursor:"pointer",color:e===g?"#7b61ff":"#fff",fontWeight:e===g?"bold":"normal"},onClick:()=>{w(e),x(!1),r({role:"system",text:`Font set to: ${e}`}),setTimeout(()=>{var i;(i=y.current)==null||i.focus()},0)},children:e},e))]})]})}),s.jsx("div",{className:"tui-header",style:{padding:16,borderBottom:"1px solid #333",display:"flex",alignItems:"center",justifyContent:"space-between"},children:s.jsxs("div",{children:[s.jsx("strong",{children:"Figlet TUI"}),s.jsxs("div",{style:{fontSize:12,color:"#aaa"},children:["Type text and press Enter — Figlet mode is",s.jsx("span",{style:{marginLeft:6,fontWeight:"bold",userSelect:"none",fontSize:14},children:s.jsx("span",{onClick:()=>{k(e=>!e),r({role:"system",text:`Figlet mode is now ${u?"OFF":"ON"}`})},style:{color:u?"#0f0":"#f44",cursor:"pointer",borderBottom:"1px dotted "+(u?"#0f0":"#f44"),padding:"0 4px",transition:"color 0.2s, border-color 0.2s"},title:"Click to toggle Figlet mode",children:u?"ON":"OFF"})})]})]})}),s.jsx("div",{ref:m,style:{flex:1,overflow:"auto",padding:16,fontSize:13},children:p.map(e=>s.jsxs("div",{style:{marginBottom:8},children:[s.jsxs("span",{style:{color:e.role==="user"?"#0ff":e.role==="assistant"?"#7b61ff":"#aaa",fontWeight:"bold"},children:[e.role,":"]}),e.role==="assistant"&&e.text.trim().startsWith("Hacker News Top Stories:")?s.jsx("span",{style:{display:"block",marginLeft:8,fontSize:12},dangerouslySetInnerHTML:{__html:e.text.replace(/<a ([^>]+)>([^<]+)<\/a>/g,(i,n,a)=>{const o=["#ffb347","#00eaff","#fff68f","#ff5e5e","#7b61ff"];let f=o[Math.floor(Math.random()*o.length)];const d=a.match(/^\d+\./);if(d){const h=parseInt(d[0],10);f=o[(h-1)%o.length]}const c=n.match(/href=['"]([^'"]+)['"]/);let l=a;if(c)try{l=new URL(c[1]).hostname.replace(/^www\./,"")}catch{}return`<a ${n} style="color: ${f}; font-weight: bold; text-decoration: underline;">${l}</a>`}).replace(/\n\n/g,"<br/><br/>").replace(/(\d+\. .+?)<br\/>/g,"$1<br/>")}}):s.jsx("pre",{style:{display:"inline",marginLeft:8,fontSize:13},children:e.text})]},e.id))}),s.jsxs("form",{style:{display:"flex",borderTop:"1px solid #333",padding:12},onSubmit:e=>{e.preventDefault(),E(F),v("")},children:[s.jsx("input",{ref:y,className:"tui-input",value:F,onChange:e=>v(e.target.value),style:{flex:1,padding:"8px 12px",borderRadius:6,border:"1px solid #444",background:"#222",color:"#fff",marginRight:8},placeholder:"Type command — try: figlet hello"}),s.jsx("button",{type:"submit",className:"btn",style:{padding:"8px 16px",borderRadius:6,background:"#7b61ff",color:"#fff",border:"none"},children:"Send"})]})]})}export{X as default};
